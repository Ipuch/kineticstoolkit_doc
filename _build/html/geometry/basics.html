


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Basics of rigid body geometry &mdash; Kinetics Toolkit (dev) master documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "math|output_area"}}</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Dimension conventions and first example" href="dimension_conventions.html" />
    <link rel="prev" title="Rigid body geometry" href="geometry.html" />


 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo_development.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">GETTING STARTED</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../what_is_kinetics_toolkit.html">What is Kinetics Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timeseries.html">TimeSeries</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TUTORIALS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../loadsave.html">Saving and loading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters/filters.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cycles.html">Detecting and normalizing cycles</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="geometry.html">Rigid body geometry</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Basics of rigid body geometry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Coordinates:-points,-vectors-and-frames">Coordinates: points, vectors and frames</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Global-coordinate-system">Global coordinate system</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Points-and-vectors">Points and vectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Local-coordinate-system">Local coordinate system</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Frames">Frames</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Rotations-and-translations:-the-homogeneous-transform">Rotations and translations: the homogeneous transform</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Moving-coordinates">Moving coordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Remap-coordinates-to-other-coordinate-systems">Remap coordinates to other coordinate systems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Main-points-to-remember">Main points to remember</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dimension_conventions.html">Dimension conventions and first example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kinematics/kinematics.html">Kinematics analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pushrimkinetics.html">Wheelchair kinetics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IN DEPTH</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../lab_mode.html">Lab mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://felixchenier.uqam.ca/ktk_develop">Development website</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/felixchenier/kineticstoolkit">GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FOR DEVELOPERS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/install.html">Installing from git-hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/conventions.html">Developer manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/tutorials.html">Tutorials for unreleased features</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kinetics Toolkit (dev)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="geometry.html">Rigid body geometry</a> &raquo;</li>
        
      <li>Basics of rigid body geometry</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="dimension_conventions.html" class="btn btn-neutral float-right" title="Dimension conventions and first example" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="geometry.html" class="btn btn-neutral float-left" title="Rigid body geometry" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Basics-of-rigid-body-geometry">
<h1>Basics of rigid body geometry<a class="headerlink" href="#Basics-of-rigid-body-geometry" title="Permalink to this headline">Â¶</a></h1>
<p>This tutorial is an introduction or reminder of the basic elements of rigid body geometry. It covers the definitions of bodies, coordinate systems, coordinates (such as points, vectors and frames), and homogeneous transforms. It follows the nomenclature conventions of Craig, J., 1987. Introduction to robotics: Mechanics and control, in the context of rigid body biomechanics.</p>
<p>While these notions largely come from the robotics field, they will be approached in the scope of rigid body biomechanics. As such, we will use the posture in Figure 1 all through the tutorial as an example for every introduced notion. To facilitate the comprehension, this is a bidimensional example; however, we will treat it as conventional 3D problem, with all z coordinates being set to zero.</p>
<hr class="docutils" />
<a class="reference internal image-reference" href="../_images/humerus_intro.png"><img alt="humerus_intro" src="../_images/humerus_intro.png" style="height: 250px;" /></a>
<p>Figure 1. The posture used as an example in this tutorial.</p>
<hr class="docutils" />
<div class="section" id="Coordinates:-points,-vectors-and-frames">
<h2>Coordinates: points, vectors and frames<a class="headerlink" href="#Coordinates:-points,-vectors-and-frames" title="Permalink to this headline">Â¶</a></h2>
<p>In this section, we will see how to express:</p>
<ul class="simple">
<li><p>Points (positions);</p></li>
<li><p>Vectors such as velocities, accelerations and forces; and</p></li>
<li><p>Frames, which are the orientation and position of a coordinate system.</p></li>
</ul>
<div class="section" id="Global-coordinate-system">
<h3>Global coordinate system<a class="headerlink" href="#Global-coordinate-system" title="Permalink to this headline">Â¶</a></h3>
<p>To express any coordinate, we need a coordinate system. A coordinate system is composed of an origin (the point in space everything is expressed relative to) and a set of axes. In human movement biomechanics, we usually use a cartesian system composed of three orthonormal axes (x, y and z).</p>
<p>In newton dynamics and at the human scale, it is totally acceptable to define a global, non-moving coordinate system everything can be referenced to. In Figure 2, we define such a fixed system:</p>
<ul class="simple">
<li><p>The origin is approximately at the hip level and posterior to the person;</p></li>
<li><p>The x axis points forward;</p></li>
<li><p>The y axis points upward;</p></li>
<li><p>The z axis points to the right.</p></li>
</ul>
<p>This coordinate system is completely arbitrary: any other origin or set of orthonormal axes would still be perfectly valid. This is the one we chose here, and the one every global coordinate will refer to.</p>
<hr class="docutils" />
<a class="reference internal image-reference" href="../_images/humerus_global_coordinates.png"><img alt="humerus_intro" src="../_images/humerus_global_coordinates.png" style="height: 250px;" /></a>
<p>Figure 2. A global coordinate system</p>
<hr class="docutils" />
</div>
<div class="section" id="Points-and-vectors">
<h3>Points and vectors<a class="headerlink" href="#Points-and-vectors" title="Permalink to this headline">Â¶</a></h3>
<p>Using the global coordinate system of Figure 2, we can express the position of any point in space using its three components (x, y, z). For example, the position of the shoulder in global coordinates is:</p>
<p><span class="math">\begin{equation}
~^\text{global}p_\text{shoulder} = \begin{bmatrix}
x_\text{shoulder} \\
y_\text{shoulder} \\
z_\text{shoulder}
\end{bmatrix}
\end{equation}</span></p>
<p>where <span class="math notranslate nohighlight">\(~^\text{global}p_\text{shoulder}\)</span> is read as: Position (<span class="math notranslate nohighlight">\(p\)</span>) of the shoulder expressed in the global coordinate system.</p>
<p>Note that while three components are sufficient to express points and vectors in three dimensions, we normally use four components instead, the fourth being 1 for points and 0 for vectors:</p>
<ul class="simple">
<li><p><strong>Points</strong>, such as positions, are expressed as <span class="math notranslate nohighlight">\([x, y, z, 1]^T\)</span>.</p></li>
<li><p><strong>Vectors</strong>, such as velocities, accelerations and forces, are expressed as <span class="math notranslate nohighlight">\([x, y, z, 0]^T\)</span>.</p></li>
</ul>
<p>Therefore, while we express the <strong>position</strong> (a point) of the shoulder in global coordinates as:</p>
<p><span class="math">\begin{equation}
~^\text{global}p_\text{shoulder} = \begin{bmatrix}
x_\text{shoulder} \\
y_\text{shoulder} \\
z_\text{shoulder} \\ 1
\end{bmatrix}
\end{equation}</span></p>
<p>we would express its <strong>velocity</strong> (a vector) as:</p>
<p><span class="math">\begin{equation}
~^\text{global}\vec{v}_\text{shoulder} = \begin{bmatrix}
v_\text{x shoulder} \\
v_\text{y shoulder} \\
v_\text{z shoulder} \\ 0
\end{bmatrix}
\end{equation}</span></p>
</div>
<div class="section" id="Local-coordinate-system">
<h3>Local coordinate system<a class="headerlink" href="#Local-coordinate-system" title="Permalink to this headline">Â¶</a></h3>
<p>As we just saw, points and vectors are easy to express in a coordinate system. The orientation of a segment is however more complex. In Figure 2, if we wanted to express the orientation of the humerus, we would explicitely need this information:</p>
<ul class="simple">
<li><p>What is the initial, non-rotated orientation of the humerus?</p></li>
<li><p>By how many degrees is it rotated from its initial orientation?</p></li>
<li><p>Around which axes?</p></li>
</ul>
<p>The first step to answer these questions is to create a <strong>local coordinate system</strong> for the humerus. This local coordinate system will be attached to the humerus, and thus will move with it.</p>
<p>To create such a coordinate system, we need to define where is the origin and orthonormal axes of the humerus, in respect to the humerus itself. In this example, we will use the anatomical position as a reference to define this coordinate system (Figure 3):</p>
<ul class="simple">
<li><p>The humerus coordinate systemâs origin is located at the glenohumeral joint;</p></li>
<li><p>Its x axis points forward;</p></li>
<li><p>Its y axis is aligned with the humerus, pointing upward;</p></li>
<li><p>Its z axis points to the right.</p></li>
</ul>
<hr class="docutils" />
<a class="reference internal image-reference" href="../_images/humerus_coordinate_system.png"><img alt="humerus_coordinate_system" src="../_images/humerus_coordinate_system.png" style="height: 250px;" /></a>
<p>Figure 3. Local coordinate system of the humerus.</p>
<hr class="docutils" />
<p>Now that we defined this local coordinate system, we can come back to the position of interest of Figure 1. Look in Figure 4 how the humerus coordinate system is attached to the humerus and thus moves with it.</p>
<hr class="docutils" />
<a class="reference internal image-reference" href="../_images/humerus_frame.png"><img alt="humerus_frame" src="../_images/humerus_frame.png" style="height: 250px;" /></a>
<p>Figure 4. Expressing the position and orientation of the humerus.</p>
<hr class="docutils" />
</div>
<div class="section" id="Frames">
<h3>Frames<a class="headerlink" href="#Frames" title="Permalink to this headline">Â¶</a></h3>
<p>We are now ready to introduce the <strong>frame</strong>, a 4x4 matrix that expresses both the position and the orientation of a coordinate system, in reference to another coordinate system.</p>
<p>The fourth (easiest) column of a frame is the position of the local coordinate systemâs origin expressed in the reference coordinate system. In the example of Figure 4, this is:</p>
<p><span class="math">\begin{equation}
~^\text{global}p_\text{humerus} = \begin{bmatrix}
x_\text{humerus} \\
y_\text{humerus} \\
z_\text{humerus} \\ 1
\end{bmatrix}
\end{equation}</span></p>
<p>The three first columns of a frame express the frame orientation. They express, in the reference coordinate system, the coordinates of three vectors of length 1 that are respectively oriented toward the x, y and z axes of the local coordinate system. Figure 5 illustrates this concept by showing the difference of orientation between the global and the humerus coordinate systems.</p>
<a class="reference internal image-reference" href="../_images/humerus_orientation.png"><img alt="humerus_orientation" src="../_images/humerus_orientation.png" style="height: 250px;" /></a>
<p>Figure 5. Orientation of the humerus coordinate system.</p>
<p>Based on Figure 5, here is how we would express these three unit vectors (in bold) in both coordinate systems:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 7%" />
<col style="width: 44%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>In the humerus coordinate system</p></th>
<th class="head"><p>In the global coordinate system</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Humerus x axis</p></td>
<td><p><span class="math notranslate nohighlight">\(\begin{bmatrix} 1 \\ 0 \\ 0 \\ 0 \end{bmatrix}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\begin{bmatrix} \cos(\theta) \\ \sin(\theta) \\ 0 \\ 0 \end{bmatrix}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Humerus y axis</p></td>
<td><p><span class="math notranslate nohighlight">\(\begin{bmatrix} 0 \\ 1 \\ 0 \\ 0 \end{bmatrix}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\begin{bmatrix} -\sin(\theta) \\ \cos(\theta) \\ 0 \\ 0 \end{bmatrix}\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Humerus z axis</p></td>
<td><p><span class="math notranslate nohighlight">\(\begin{bmatrix} 0 \\ 0 \\ 1 \\ 0 \end{bmatrix}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\begin{bmatrix} 0 \\ 0 \\ 1 \\ 0 \end{bmatrix}\)</span></p></td>
</tr>
</tbody>
</table>
<p>Combining these four vectors into a single 4x4 matrix gives the frame <span class="math notranslate nohighlight">\(~^\text{global}_\text{humerus}T\)</span>:</p>
<p><span class="math">\begin{equation}
~^\text{global}_\text{humerus}T = \begin{bmatrix}
\cos(\theta) & -\sin(\theta) & 0 & x_\text{humerus} \\
\sin(\theta) & \cos(\theta) & 0 & y_\text{humerus} \\
0 & 0 & 1 & z_\text{humerus} \\
0 & 0 & 0 & 1
\end{bmatrix}
\end{equation}</span></p>
<p>where the expression <span class="math notranslate nohighlight">\(~^\text{global}_\text{humerus}T\)</span> is read as: Position and orientation of the humerus coordinate system, expressed in the global coordinate system.</p>
<p>For example, if the shoulder is located 15 cm forward and 70 cm upward to the global origin, and the humerus is inclined at 30 degrees of the vertical, then the position and orientation of the humerus coordinate system is expressed by the frame:</p>
<p><span class="math">\begin{equation}
~^\text{global}_\text{humerus}T = \begin{bmatrix}
\cos(30) & -\sin(30) & 0 & 0.15 \\
\sin(30) & \cos(30) & 0 & 0.7 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix} \\=
\begin{bmatrix}
0.866 & -0.5 & 0 & 0.15 \\
0.5 & 0.866 & 0 & 0.7 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
\end{equation}</span></p>
<p>Independently of the position and orientation of the studied body, a frame always has this form:</p>
<p><span class="math">\begin{equation}
\begin{bmatrix}
R_{11} & R_{12} & R_{13} & P_xÂ \\
R_{21} & R_{22} & R_{23} & P_y \\
R_{31} & R_{32} & R_{33} & P_z \\
0      & 0      & 0      & 1
\end{bmatrix}
\end{equation}</span></p>
<p>where:</p>
<ul class="simple">
<li><p>the <span class="math notranslate nohighlight">\(R\)</span> sub-matrix is a function of three rotation angles and represents the orientation of the local coordinate system;</p></li>
<li><p>the <span class="math notranslate nohighlight">\(P\)</span> vector is the position of the local coordinate systemâs origin.</p></li>
</ul>
</div>
</div>
<div class="section" id="Rotations-and-translations:-the-homogeneous-transform">
<h2>Rotations and translations: the homogeneous transform<a class="headerlink" href="#Rotations-and-translations:-the-homogeneous-transform" title="Permalink to this headline">Â¶</a></h2>
<p>The 4x4 matrix that we just constructed is very important, not only to express the position and orientation of a local coordinate system, but also to express transformations such as rotations and translations. In this second case, the same 4x4 matrix is called an homogeneous transform, and:</p>
<ul class="simple">
<li><p>the <span class="math notranslate nohighlight">\(R\)</span> sub-matrix represents a rotation;</p></li>
<li><p>the <span class="math notranslate nohighlight">\(P\)</span> vector is a translation.</p></li>
</ul>
<div class="section" id="Moving-coordinates">
<h3>Moving coordinates<a class="headerlink" href="#Moving-coordinates" title="Permalink to this headline">Â¶</a></h3>
<p>Any coordinate (point, vector or frame) that is multiplied by the homogeneous transform will be rotated by <span class="math notranslate nohighlight">\(R\)</span> and translated by <span class="math notranslate nohighlight">\(P\)</span>:</p>
<p><span class="math">\begin{equation}
p_{\text{tranformed}} = T p_\text{initial}
\end{equation}</span></p>
<p>For example, if we want to rotate the point (10, 0, 0) by 30 degrees around the originâs z axis, then translate it 2 units to the right:</p>
<p><span class="math">\begin{equation}
p_{\text{tranformed}} =
\begin{bmatrix}
\cos(30) & -\sin(30) & 0 & 2 \\
\sin(30) & \cos(30) & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
\begin{bmatrix} 10 \\ 0 \\ 0 \\ 1 \end{bmatrix} \\ =
\begin{bmatrix} 10\cos(30) + 2 \\ 10\sin(30) \\ 0 \\ 1 \end{bmatrix} =
\begin{bmatrix} 8.66 \\ 5 \\ 0 \\ 1 \end{bmatrix}
\end{equation}</span></p>
</div>
<div class="section" id="Remap-coordinates-to-other-coordinate-systems">
<h3>Remap coordinates to other coordinate systems<a class="headerlink" href="#Remap-coordinates-to-other-coordinate-systems" title="Permalink to this headline">Â¶</a></h3>
<p>An homogenenous transform can rotate and translate any coordinate, including points, vectors and frames. Since the orientation and position of a coordinate system is itself expressed by a frame, then an homogeneous transform can also rotate and translate a coordinate system.</p>
<p>This is a great opportunity to express coordinates from a coordinate system to another. As such, the <span class="math notranslate nohighlight">\(~^\text{global}_\text{humerus}T\)</span> matrix that we formed in the last section has a first function that we already know:</p>
<ol class="arabic simple">
<li><p>Expressing the position and orientation of the humerus coordinate system.</p></li>
</ol>
<p>But it also has a second function:</p>
<ol class="arabic simple" start="2">
<li><p>Remap coordinates from the humerus local coordinate system to the global coordinate system.</p></li>
</ol>
<p>This is performed exactly as we did above when we rotated and translated a point. Multiplying a point expressed in a local coordinate system by its own frame of reference gives the position of the point expressed in global coordinates:</p>
<p><span class="math">\begin{equation}
~^\text{global}p = ~^\text{global}_\text{local}T ~^\text{local}p
\end{equation}</span></p>
<p>We are due for an example. Letâs say we known that the lenght of the arm is 38 cm, and we want to express the position of the elbow in the global coordinate system. We will assume the same posture as before: the shoulder is located 15 cm forward and 70 cm upward to the global origin and the humerus is inclined at 30 degrees of the vertical.</p>
<p>The position of the elbow in the humerus coordinate system is:</p>
<p><span class="math">\begin{equation}
~^\text{humerus}p_\text{elbow} = \begin{bmatrix}
0 \\ -0.38 \\ 0 \\ 1
\end{bmatrix}
\end{equation}</span></p>
<p>The humerus frame is:</p>
<p><span class="math">\begin{equation}
~^\text{global}_\text{humerus}T = \begin{bmatrix}
\cos(30) & -\sin(30) & 0 & 0.15 \\
\sin(30) & \cos(30) & 0 & 0.7 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix} \\=
\begin{bmatrix}
0.866 & -0.5 & 0 & 0.15 \\
0.5 & 0.866 & 0 & 0.7 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
\end{equation}</span></p>
<p>Therefore, the position of the elbow in the global coordinate system is:</p>
<p><span class="math">\begin{equation}
~^\text{global}p_\text{elbow} =
~^\text{global}_\text{humerus}T ~^\text{humerus}p_\text{elbow} \\=
\begin{bmatrix}
0.866 & -0.5 & 0 & 0.15 \\
0.5 & 0.866 & 0 & 0.7 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
0 \\ -0.38 \\ 0 \\ 1
\end{bmatrix} \\=
\begin{bmatrix}
0.19 + 0.15 \\
-0.329 + 0.7 \\
0 \\
1 \end{bmatrix} =
\begin{bmatrix}
0.34 \\ 0.371 \\ 0 \\ 1
\end{bmatrix}
\end{equation}</span></p>
<p>Its final coordinates are <span class="math notranslate nohighlight">\((0.34, 0.371, 0)\)</span>.</p>
</div>
</div>
<div class="section" id="Main-points-to-remember">
<h2>Main points to remember<a class="headerlink" href="#Main-points-to-remember" title="Permalink to this headline">Â¶</a></h2>
<p>We will see in the next tutorial that Kinetics Toolkitâs geometry module has several functions to ease the expression of coordinates from one coordinate system to another, to create frames and homogeneous transforms, etc. However, I believe it is important to remember these concepts, to understand how geometric data is represented and calculated.</p>
<ul class="simple">
<li><p>A point expresses a position in a given coordinate system, and is written as the 4x1 vector:</p></li>
</ul>
<p><span class="math">\begin{equation}\begin{bmatrix}
x \\ y \\ z \\ 1
\end{bmatrix}\end{equation}</span></p>
<ul class="simple">
<li><p>A vector expresses a displacement, velocity, acceleration, force, etc., in a given coordinate system, and is written as the 4x1 vector:</p></li>
</ul>
<p><span class="math">\begin{equation}\begin{bmatrix}
x \\ y \\ z \\ 0
\end{bmatrix}\end{equation}</span></p>
<ul class="simple">
<li><p>A frame expresses the orientation <span class="math notranslate nohighlight">\(R\)</span> and position <span class="math notranslate nohighlight">\(P\)</span> of a local coordinate system into a reference coordinate system, and is written as the 4x4 matrix:</p></li>
</ul>
<p><span class="math">\begin{equation}
\begin{bmatrix}
R_{11} & R_{12} & R_{13} & P_xÂ \\
R_{21} & R_{22} & R_{23} & P_y \\
R_{31} & R_{32} & R_{33} & P_z \\
0      & 0      & 0      & 1
\end{bmatrix}
\end{equation}</span></p>
<ul class="simple">
<li><p>An homogeneous transform expresses a rotation <span class="math notranslate nohighlight">\(R\)</span> and translation <span class="math notranslate nohighlight">\(P\)</span> from a given frame to another, and is written as the same 4x4 matrix:</p></li>
</ul>
<p><span class="math">\begin{equation}
\begin{bmatrix}
R_{11} & R_{12} & R_{13} & P_xÂ \\
R_{21} & R_{22} & R_{23} & P_y \\
R_{31} & R_{32} & R_{33} & P_z \\
0      & 0      & 0      & 1
\end{bmatrix}
\end{equation}</span></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="dimension_conventions.html" class="btn btn-neutral float-right" title="Dimension conventions and first example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="geometry.html" class="btn btn-neutral float-left" title="Rigid body geometry" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2021, FÃ©lix ChÃ©nier.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>