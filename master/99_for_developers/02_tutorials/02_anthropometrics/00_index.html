
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anthropometrics &mdash; Kinetics Toolkit (dev) master documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Inverse Dynamics" href="../03_inversedynamics/00_index.html" />
    <link rel="prev" title="Reconstructing virtual markers" href="../01_reconstruction/00_index.html" />


 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
            <a href="../../../index.html">
            <img src="../../../_static/logo_development.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">MANUAL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../01_getting_started/00_index.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../02_tutorials/00_index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04_in_depth/00_index.html">In depth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../05_learning_python/00_index.html">Learning Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API REFERENCE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../99_api_reference/01_classes.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../99_api_reference/02_functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../99_api_reference/03_modules.html">Modules</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LINKS</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://felixchenier.uqam.ca/ktk_develop">Development website</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/felixchenier/kineticstoolkit">GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FOR DEVELOPERS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../01_getting_started/00_index.html">Developing Kinetics Toolkit</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../00_index.html">Tutorial development for stable/unstable features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01_reconstruction/00_index.html">Reconstructing virtual markers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Anthropometrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#infer-joint-centers">Infer joint centers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#estimate-centers-of-mass">Estimate centers of mass</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#track-local-coordinate-systems">Track local coordinate systems</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03_inversedynamics/00_index.html">Inverse Dynamics</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Kinetics Toolkit (dev)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../00_index.html">Tutorial development for stable/unstable features</a> &raquo;</li>
      <li>Anthropometrics</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../01_reconstruction/00_index.html" class="btn btn-neutral float-left" title="Reconstructing virtual markers" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../03_inversedynamics/00_index.html" class="btn btn-neutral float-right" title="Inverse Dynamics" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="anthropometrics">
<h1>Anthropometrics<a class="headerlink" href="#anthropometrics" title="Permalink to this headline"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">anthropometrics</span></code> module aims to assist the reconstruction of human-specific points of anatomy, to establish trajectories of segment orientations via standardised local coordinate systems, and to estimate the segment’s centers of mass and inertial properties.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an experimental module, its API and behaviour may change in the future.</p>
</div>
<p>In this tutorial, we will work on a static acquisition where we probed and followed a set of bony landmarks. We will infer joint centers based on these landmarks, then we will estimate the segments’ centers of mass, and finally we will track local coordinate systems for every segment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">kineticstoolkit.lab</span> <span class="k">as</span> <span class="nn">ktk</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<p>We will start by loading a sample dataset, inspect its contents and show it in a player.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">markers</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
    <span class="n">ktk</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">root_folder</span>
    <span class="o">+</span> <span class="s1">&#39;/data/anthropometrics/static.ktk.zip&#39;</span>
<span class="p">)</span>

<span class="c1"># Print the available markers</span>
<span class="n">markers</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{
                    &#39;LegR_Marker1&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;LegR_Marker3&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;LegR_Marker4&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;LegL_Marker1&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;LegL_Marker2&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;LegL_Marker3&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;LegL_Marker4&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmR_Marker1&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmR_Marker2&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmR_Marker3&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmR_Marker4&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmL_Marker1&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmL_Marker2&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmL_Marker3&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;ArmL_Marker4&#39;: &lt;array of shape (614, 4)&gt;
                    &#39;LegR_Marker2&#39;: &lt;array of shape (614, 4)&gt;
                   &#39;Trunk_Marker1&#39;: &lt;array of shape (614, 4)&gt;
                   &#39;Trunk_Marker2&#39;: &lt;array of shape (614, 4)&gt;
                         &#39;Xiphoid&#39;: &lt;array of shape (614, 4)&gt;
     &#39;AnteriorSuperiorIliacSpineR&#39;: &lt;array of shape (614, 4)&gt;
     &#39;AnteriorSuperiorIliacSpineL&#39;: &lt;array of shape (614, 4)&gt;
                  &#39;PubicSymphysis&#39;: &lt;array of shape (614, 4)&gt;
                              &#39;C7&#39;: &lt;array of shape (614, 4)&gt;
                   &#39;Suprasternale&#39;: &lt;array of shape (614, 4)&gt;
                       &#39;AcromionR&#39;: &lt;array of shape (614, 4)&gt;
                       &#39;AcromionL&#39;: &lt;array of shape (614, 4)&gt;
       &#39;LateralHumeralEpicondyleR&#39;: &lt;array of shape (614, 4)&gt;
       &#39;LateralHumeralEpicondyleL&#39;: &lt;array of shape (614, 4)&gt;
        &#39;MedialHumeralEpicondyleR&#39;: &lt;array of shape (614, 4)&gt;
        &#39;MedialHumeralEpicondyleL&#39;: &lt;array of shape (614, 4)&gt;
                  &#39;RadialStyloidR&#39;: &lt;array of shape (614, 4)&gt;
                  &#39;RadialStyloidL&#39;: &lt;array of shape (614, 4)&gt;
                   &#39;UlnarStyloidR&#39;: &lt;array of shape (614, 4)&gt;
                   &#39;UlnarStyloidL&#39;: &lt;array of shape (614, 4)&gt;
       &#39;LateralFemoralEpicondyleR&#39;: &lt;array of shape (614, 4)&gt;
       &#39;LateralFemoralEpicondyleL&#39;: &lt;array of shape (614, 4)&gt;
        &#39;MedialFemoralEpicondyleR&#39;: &lt;array of shape (614, 4)&gt;
        &#39;MedialFemoralEpicondyleL&#39;: &lt;array of shape (614, 4)&gt;
               &#39;LateralMalleolusR&#39;: &lt;array of shape (614, 4)&gt;
               &#39;LateralMalleolusL&#39;: &lt;array of shape (614, 4)&gt;
                &#39;MedialMalleolusR&#39;: &lt;array of shape (614, 4)&gt;
                &#39;MedialMalleolusL&#39;: &lt;array of shape (614, 4)&gt;
                &#39;CarpalMetaHead2R&#39;: &lt;array of shape (614, 4)&gt;
                &#39;CarpalMetaHead5R&#39;: &lt;array of shape (614, 4)&gt;
                &#39;CarpalMetaHead2L&#39;: &lt;array of shape (614, 4)&gt;
                &#39;CarpalMetaHead5L&#39;: &lt;array of shape (614, 4)&gt;
                      &#39;HeadVertex&#39;: &lt;array of shape (614, 4)&gt;
                         &#39;Sellion&#39;: &lt;array of shape (614, 4)&gt;
    &#39;PosteriorSuperiorIliacSpineR&#39;: &lt;array of shape (614, 4)&gt;
    &#39;PosteriorSuperiorIliacSpineL&#39;: &lt;array of shape (614, 4)&gt;
                            &#39;Chin&#39;: &lt;array of shape (614, 4)&gt;
}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show in a Player</span>
<span class="n">viewpoint</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;zoom&#39;</span><span class="p">:</span> <span class="mf">3.5</span><span class="p">,</span>
    <span class="s1">&#39;azimuth&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">2.356</span><span class="p">,</span>
    <span class="s1">&#39;elevation&#39;</span><span class="p">:</span> <span class="mf">0.384</span><span class="p">,</span>
    <span class="s1">&#39;translation&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.083</span><span class="p">,</span> <span class="mf">0.184</span><span class="p">),</span>
    <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">4.435</span><span class="p">,</span> <span class="mf">0.726</span><span class="p">,</span> <span class="mf">0.540</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">player</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">Player</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span>
    <span class="n">segments</span><span class="o">=</span><span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">LINKS</span><span class="p">,</span>  <span class="c1"># Lines to better see the human shape</span>
    <span class="o">**</span><span class="n">viewpoint</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/00_index_4_0.png" src="../../../_images/00_index_4_0.png" />
</div>
</div>
<section id="infer-joint-centers">
<h2>Infer joint centers<a class="headerlink" href="#infer-joint-centers" title="Permalink to this headline"></a></h2>
<p>Although a lot of markers are already available in this acquisition, the joint centers are undefined. We will first add the hips and L5S1, which are defined by the pelvis segment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">infer_joint_centers</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="s1">&#39;Pelvis&#39;</span><span class="p">,</span> <span class="n">sex</span><span class="o">=</span><span class="s1">&#39;M&#39;</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">player</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">Player</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span>
    <span class="n">segments</span><span class="o">=</span><span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">LINKS</span><span class="p">,</span>  <span class="c1"># Lines to better see the human shape</span>
    <span class="o">**</span><span class="n">viewpoint</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/00_index_6_0.png" src="../../../_images/00_index_6_0.png" />
</div>
</div>
<p>Then, we can add the glenohumeral joints and C7T1, which are defined by the thorax segment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">infer_joint_centers</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="s1">&#39;Thorax&#39;</span><span class="p">,</span> <span class="n">sex</span><span class="o">=</span><span class="s1">&#39;M&#39;</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">player</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">Player</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span>
    <span class="n">segments</span><span class="o">=</span><span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">LINKS</span><span class="p">,</span>  <span class="c1"># Lines to better see the human shape</span>
    <span class="o">**</span><span class="n">viewpoint</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/00_index_8_0.png" src="../../../_images/00_index_8_0.png" />
</div>
</div>
<p>Finally, we add the joint centers for the extremities, which are calculated as the midpoint between their respective lateral and medial bony landmarks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">infer_joint_centers</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="s1">&#39;Extremities&#39;</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">player</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">Player</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span>
    <span class="n">segments</span><span class="o">=</span><span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">LINKS</span><span class="p">,</span>  <span class="c1"># Lines to better see the human shape</span>
    <span class="o">**</span><span class="n">viewpoint</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/00_index_10_01.png" src="../../../_images/00_index_10_01.png" />
</div>
</div>
<p>Now that every joint center is reconstructed based on this static acquisition, we may to include these joint centers into marker clusters so that they can be reconstructed later in an analyzed action.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">clusters</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">clusters</span><span class="p">[</span><span class="s1">&#39;Pelvis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;AnteriorSuperiorIliacSpineR&#39;</span><span class="p">,</span>
        <span class="s1">&#39;AnteriorSuperiorIliacSpineL&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PosteriorSuperiorIliacSpineR&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PosteriorSuperiorIliacSpineL&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PubicSymphysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;L5S1JointCenter&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HipJointCenterR&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HipJointCenterL&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">clusters</span><span class="p">[</span><span class="s1">&#39;Thorax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;C7&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Xiphoid&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Suprasternale&#39;</span><span class="p">,</span>
        <span class="s1">&#39;C7T1JointCenter&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">clusters</span><span class="p">[</span><span class="s1">&#39;HeadNeck&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;Sellion&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HeadVertex&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Chin&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">]:</span>

    <span class="n">clusters</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Arm</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s1">&#39;Arm</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker1&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;Arm</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker2&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;Arm</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker3&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;Arm</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker4&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;GlenohumeralJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;LateralHumeralEpicondyle</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;MedialHumeralEpicondyle</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;ElbowJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">clusters</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Forearm</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s1">&#39;ElbowJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;UlnarStyloid</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;RadialStyloid</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;WristJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">clusters</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Hand</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s1">&#39;WristJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;CarpalMetaHead2</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;CarpalMetaHead5</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">clusters</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Thigh</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s1">&#39;HipJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># Normally I would remove this one.</span>
            <span class="sa">f</span><span class="s1">&#39;LateralFemoralEpicondyle</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;MedialFemoralEpicondyle</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;KneeJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">clusters</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Leg</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">kinematics</span><span class="o">.</span><span class="n">create_cluster</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s1">&#39;Leg</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker1&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;Leg</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker2&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;Leg</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker3&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;Leg</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">_Marker4&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;LateralMalleolus</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;MedialMalleolus</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;KneeJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;AnkleJointCenter</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="estimate-centers-of-mass">
<h2>Estimate centers of mass<a class="headerlink" href="#estimate-centers-of-mass" title="Permalink to this headline"></a></h2>
<p>Now that the joint centers are defined, it is possible to estimate the center of mass for every segment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">segments</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Pelvis&#39;</span><span class="p">,</span> <span class="s1">&#39;Thorax&#39;</span><span class="p">,</span> <span class="s1">&#39;HeadNeck&#39;</span><span class="p">,</span> <span class="s1">&#39;ArmR&#39;</span><span class="p">,</span> <span class="s1">&#39;ArmL&#39;</span><span class="p">,</span> <span class="s1">&#39;ForearmR&#39;</span><span class="p">,</span> <span class="s1">&#39;ForearmL&#39;</span><span class="p">,</span>
    <span class="s1">&#39;HandR&#39;</span><span class="p">,</span> <span class="s1">&#39;HandL&#39;</span><span class="p">,</span> <span class="s1">&#39;ThighR&#39;</span><span class="p">,</span> <span class="s1">&#39;ThighL&#39;</span><span class="p">,</span> <span class="s1">&#39;LegR&#39;</span><span class="p">,</span> <span class="s1">&#39;LegL&#39;</span>
<span class="p">]</span>

<span class="n">com</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">estimate_center_of_mass</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span> <span class="n">segments</span><span class="p">)</span>

<span class="c1"># Paint the centers of mass in cyan for better visualization</span>
<span class="k">for</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">com</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
    <span class="n">com</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">add_data_info</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
    
<span class="n">player</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">Player</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span>
    <span class="n">com</span><span class="p">,</span>
    <span class="n">segments</span><span class="o">=</span><span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">LINKS</span><span class="p">,</span>  <span class="c1"># Lines to better see the human shape</span>
    <span class="o">**</span><span class="n">viewpoint</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/00_index_14_0.png" src="../../../_images/00_index_14_0.png" />
</div>
</div>
<section id="track-local-coordinate-systems">
<h3>Track local coordinate systems<a class="headerlink" href="#track-local-coordinate-systems" title="Permalink to this headline"></a></h3>
<p>To perform a kinematic analysis of a given task, one could use the reconstructed markers to set standard segment’s local coordinate system and track those segments.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bodies</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">track_local_coordinate_systems</span><span class="p">(</span>
        <span class="n">markers</span><span class="p">,</span> <span class="n">segments</span><span class="p">)</span>

<span class="n">player</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">Player</span><span class="p">(</span>
    <span class="n">markers</span><span class="p">,</span>
    <span class="n">bodies</span><span class="p">,</span>
    <span class="n">segments</span><span class="o">=</span><span class="n">ktk</span><span class="o">.</span><span class="n">anthropometrics</span><span class="o">.</span><span class="n">LINKS</span><span class="p">,</span>  <span class="c1"># Lines to better see the human shape</span>
    <span class="o">**</span><span class="n">viewpoint</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/00_index_16_0.png" src="../../../_images/00_index_16_0.png" />
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../01_reconstruction/00_index.html" class="btn btn-neutral float-left" title="Reconstructing virtual markers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../03_inversedynamics/00_index.html" class="btn btn-neutral float-right" title="Inverse Dynamics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2021, Félix Chénier.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>